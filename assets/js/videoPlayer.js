(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),d=document.getElementById("mute"),a=d.querySelector("i"),u=document.getElementById("volume"),s=document.getElementById("currenTime"),l=document.getElementById("totalTime"),o=document.getElementById("timeline"),i=document.getElementById("fullScreen"),r=i.querySelector("i"),m=document.getElementById("videoContainer"),c=document.getElementById("videoControls");let v=null,E=.5,f=null;e.volume=E;const L=t=>{e.paused?e.play():e.pause(),n.classList=e.paused?"fas fa-play":"fas fa-pause"},y=e=>new Date(1e3*e).toISOString().substring(14,19),p=()=>{document.fullscreenElement?(document.exitFullscreen(),r.classList="fas fa-expand"):(m.requestFullscreen(),r.classList="fas fa-compress")},g=()=>c.classList.remove("showing"),T=t=>{e.currentTime+=t};t.addEventListener("click",L),d.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,a.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",u.value=e.muted?0:E})),u.addEventListener("input",(t=>{const{target:{value:n}}=t;e.muted&&(e.muted=!1,d.innerText="Mute"),E=n,e.volume=n})),e.addEventListener("loadeddata",(()=>{l.innerText=y(Math.floor(e.duration)),o.max=Math.floor(e.duration)})),e.addEventListener("timeupdate",(()=>{s.innerText=y(Math.floor(e.currentTime)),o.value=Math.floor(e.currentTime)})),e.addEventListener("ended",(()=>{n.classList="fas fa-play"})),e.addEventListener("ended",(()=>{const{id:e}=m.dataset;fetch(`/api/videos/${e}/view`,{method:"POST"})})),o.addEventListener("input",(t=>{const{target:{value:n}}=t;e.currentTime=n})),i.addEventListener("click",p),m.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),f&&(clearTimeout(f),f=null),c.classList.add("showing"),f=setTimeout(g,3e3)})),m.addEventListener("mouseleave",(()=>{v=setTimeout(g,3e3)})),e.addEventListener("click",(()=>{L()})),document.addEventListener("keyup",(e=>{"Space"===e.code&&L(),"KeyF"===e.code&&p(),"ArrowRight"===e.code&&T(5),"ArrowLeft"===e.code&&T(-5)}))})();